"0","catastro <- rgdal::readOGR(dsn = ""./datos/Catastro_gdb.shp"", layer = ""Catastro_gdb"")"
"1","OGR data source with driver:"
"1"," "
"1","ESRI Shapefile"
"1"," "
"1","
"
"1","Source: """
"1",""
"1","G:\Otros ordenadores\Mi portátil\FILES\UNIVERSITY\2022-2\TECNICAS DE ANALISIS ESTADISTICO\TRABAJOS\TRABAJO 3\TAE-Trabajo-3\datos\Catastro_gdb.shp"
"1",""
"1",""", layer: """
"1",""
"1","Catastro_gdb"
"1",""
"1",""""
"1",""
"1","
"
"1","with"
"1"," "
"1","349"
"1"," "
"1","features"
"1","
"
"1","It has"
"1"," "
"1","10"
"1"," "
"1","fields"
"1","
"
"0","#quitamos los 962 datos de CBML que están errados ---> quedan 269803"
"0","bd <- bd[-which(bd$CBML %in% c(""AUC1"",""AUC2"",""Inst_14"",""Inst_16"",""Inst_18"",""Inst_19"",""Sin Inf"",""SN01"")),]"
"0",""
"0","#Creamos un nueva columna llamada CB en bd que solo deja los primeros 4 digitos de CBML para buscarlos en la bd de catastro y traer la comuna y el barrio de los que estén vacios."
"0",""
"0","bd <- mutate(bd, TEMP_CBML = str_sub(CBML,1,4))"
"0",""
"0","#agregando un cero adelante a los TEMP_CBML y creando una nueva columna --> TEMP2_CBML"
"0","bd <- mutate(bd, TEMP2_CBML=ifelse(nchar(TEMP_CBML)==3,paste0(""0"", TEMP_CBML),TEMP_CBML),TEMP_CBML)"
"0",""
"0","colnames(bd)#nombres de columnas"
"1"," [1]"
"1"," ""AÑO""                  "
"1"," ""CBML""                 "
"1"," ""CLASE_ACCIDENTE""      "
"1","
"
"1"," [4]"
"1"," ""DIRECCION""            "
"1"," ""DIRECCION.ENCASILLADA"""
"1"," ""DISEÑO""               "
"1","
"
"1"," [7]"
"1"," ""EXPEDIENTE""           "
"1"," ""FECHA_ACCIDENTE""      "
"1"," ""FECHA_ACCIDENTES""     "
"1","
"
"1","[10]"
"1"," ""GRAVEDAD_ACCIDENTE""   "
"1"," ""MES""                  "
"1"," ""NRO_RADICADO""         "
"1","
"
"1","[13]"
"1"," ""NUMCOMUNA""            "
"1"," ""BARRIO""               "
"1"," ""COMUNA""               "
"1","
"
"1","[16]"
"1"," ""LOCATION""             "
"1"," ""X""                    "
"1"," ""Y""                    "
"1","
"
"1","[19]"
"1"," ""DISENO""               "
"1"," ""DIA_SEMANA""           "
"1"," ""HORA_ACCIDENTE""       "
"1","
"
"1","[22]"
"1"," ""TEMP_CBML""            "
"1"," ""TEMP2_CBML""           "
"1","
"
"0","#base unificada"
"0",""
"0","bd <- inner_join(bd, dplyr::select(catastro@data,CODIGO,NOMBRE_COM,NOMBRE_BAR),"
"0","                  by = c(""TEMP2_CBML"" = ""CODIGO"")) #quedan 254009 datos"
"0",""
"0",""
"0","#Quitar repetidos por el inner_join"
"0",""
"0","bd <- bd %>%     #convirtiendo en factor para ver mejor los únicos"
"0","  mutate(NRO_RADICADO = as.factor(NRO_RADICADO))"
"0","radicados_duplicados <- bd$NRO_RADICADO[duplicated(bd$NRO_RADICADO)]"
"0",""
"0","radicados_duplicados  #verificar duplicados"
"1"," [1]"
"1"," 1640356             "
"1"," 39226               "
"1"," 28508               "
"1"," 52647               "
"1","
"
"1"," [5]"
"1"," 23632               "
"1"," 62196               "
"1"," 50016000206201749504"
"1"," 1640922             "
"1","
"
"1"," [9]"
"1"," 1647286             "
"1"," 30063               "
"1"," 29482               "
"1"," 31435               "
"1","
"
"1","[13]"
"1"," 1639954             "
"1"," 1640023             "
"1"," 1638618             "
"1"," 1618580             "
"1","
"
"1","[17]"
"1"," 1640118             "
"1"," 1639346             "
"1"," <NA>                "
"1"," 1647440             "
"1","
"
"1","[21]"
"1"," <NA>                "
"1"," 50016000206201815040"
"1"," 48996               "
"1"," <NA>                "
"1","
"
"1","[25]"
"1"," <NA>                "
"1"," 62196               "
"1"," 50016000206201520138"
"1"," 37656               "
"1","
"
"1","[29]"
"1"," 50016000206201520138"
"1"," 50016000206201602058"
"1"," 18349               "
"1"," 50016000206201552896"
"1","
"
"1","[33]"
"1"," 58560               "
"1"," 58864               "
"1"," 50016000206201815040"
"1"," 1656231             "
"1","
"
"1","[37]"
"1"," 1655403             "
"1"," 1662064             "
"1","
"
"1","249489 "
"1",""
"1","Levels: "
"1",""
"1","0 12 15 20 38 61 252 327 446 499 545 625 650 655 714 774 812 862 864 1037 ... 5.00160002069202e+20"
"1",""
"1","
"
"0","registros_rad_dup <- bd %>% "
"0","  "
"0","  filter(NRO_RADICADO %in% radicados_duplicados) %>%  #"
"0","  arrange(NRO_RADICADO)"
"0","#registros_rad_dup"
"0",""
"0",""
"0","bd_unif <- bd %>% "
"0","  filter(!(NRO_RADICADO %in% radicados_duplicados))"
"0","#246417 observaciones únicas"
"0",""
